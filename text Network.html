<head>
<link rel="stylesheet" href = "css/styles.css">
  <script src="https://unpkg.com/three"></script>
  <script src="https://unpkg.com/three-spritetext"></script>
  <script src="https://unpkg.com/3d-force-graph"></script>
  <script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script src='https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js' charset="utf-8"></script>
</head>
<body>
    
    <div 
    id="particles-js" style="z-index: -1;
    position: fixed;
    top: 0;
    left: 0; right: 0; bottom: 0;"></div>
    <div id="3d-graph"></div>

    <script>
      particlesJS.load('particles-js', `https://raw.githubusercontent.com/Mayolatradez/ADS3/master/particles.json`, function() {
        console.log('callback - particles.js config loaded');
      });
    </script>

    <script>
      const data = {
        nodes: [
       /** Environmental Violence */
          { id: "Domestic & Commercial", group: 0},
          { id: "Nile River", group: 0},
          { id: "Nile Delta", group: 0},
          { id: "Mediterranean Sea", text:"The Medditerranean Sea has one of the highest concetrations of microfibres recorded. Off the coast Egypt, the particle count goes up to 1 million parts per square kilometer. This is has an impact on the marine fauna. The Fiber count is attributed to the waste water outfall into rivers that ultimately makes into the Sea" ,group: 0},
          { id: "Microbial Colonies", text:"Microbial Colonies metabolise with microfibers due to them being carbon based polymers. Whilst there are species of microbial oragnisms like Psuedomonas that fully metabolise and breakdown fibres most fibres dont break down fast enough before they are consumed by marine life. ", img:'../ADS3/Images/Biofilm Microbial.gif', group: 0},
          { id: "Microfibres", text:"Little attention has gone into understanding the fate and effects of microfibres which are mostly shed from synthetic textiles during production and washing. Polyethylene terephthalate a thermoplastic polymer resin used in all artificial textiles, like polyester and nylon are not biodegradable. Textiles is the second largest pollutant and Microfibres, a product of the apparel industry, has recently come to the forefront of the ocean pollution discourse and we are yet to uncover the violence it holds. When these fibres enter our water ways they harbour contaminants, metabolise microbial life and drift only to be consumed by bottom feeders which stifle their growth which ultimately affects the food chain.", img:'', group: 0},
          { id: "River Sediment",  text:"Abbrasive degredation happens when microfibres end up on river sediment. Because it is a physically breaking it down it merely breaks down further into nanofibres this modifies the soil properties which", group: 0},
          { id: "MicroFauna", group: 0},
          { id: "MacroFauna", group: 0},
          { id: "MegaFauna", group: 0},
          { id: "Aquaculture & Fisheries", group: 0},
          { id: "Coastal Shores", group: 0},
          { id: "Salt & Freshwater Marsh", group: 0},
          { id: "Industrial Contaminants", group: 0},
          { id: "Waste Water Plants", group: 0},
          { id: "Industrial Factories", group: 0},
          { id: "Textile Factories", group: 0},
          { id: "Domestic and Commercial Waste Water", group: 0},
          { id: "Agricultural Irrigation", group: 0},
          { id: "Agricultural Drains", group: 0},
          { id: "Sludge Fertilizer", group: 0},
          { id: "Red Sea", group: 0},
          { id: "City Solid Waste", group: 0},
          /** Socioeconomic Violence*/
          { id: "International Consortiums", group: 3},
          { id: "Zabbaleen",img: '../ADS3/Images/Zabbaleen.jpg', group: 1},
          { id: "Egyptian Company for Garbage Collection (ECGC)", group: 2},
          { id: "URBASER from Spain", group: 3},
          { id: "FCC from Spain", group: 3},
          { id: "AMA S.p.A. (ama) from Italy", group: 3},
          { id: "Emaar from United Arab Emirates", group: 3},
          { id: "New Suez Canal", group: 2},
          { id: "Suez Canal Authority (SCA)", group: 2},
          { id: "Numerous local companies in dry-digging phase", group: 1},
          { id: "Suez Canal", group: 2},
          { id: "China Belt & Road Initiative", group: 1 },
          { id: "Mankai Investments", group: 1},
          { id: "Free Economic Zones", group: 1},
          { id: "Port Saied", group: 2},
          { id: "Synthetic Fibre Growth", group: 1},
          { id: "Shundong Ruyi Group", group: 1},
          { id: "Shundong Ruyi Factories", group: 1},
          { id: "Mankai textile Park", group: 1},
          { id: "Sadat City", group: 2},
          { id: "Egypt", group: 2},
        ],
        links: [
          /** logic */
          { source: "Shundong Ruyi Factories", target: "Suez Canal", value: 1},
          { source: "Mankai Investments", target: "Free Economic Zones", value: 1},
          { source: "China Belt & Road Initiative", target: "Shundong Ruyi Group", value: 1},
          { source: "Shundong Ruyi Group", target: "Free Economic Zones", value: 1},
          { source: "China Belt & Road Initiative", target: "New Suez Canal", value: 1},
          { source: "China Belt & Road Initiative", target: "Mankai Investments", value: 1},
          { source: "Free Economic Zones", target: "Suez Canal", value: 1},
          { source: "Shundong Ruyi Factories", target: "Suez Canal", value: 1},
          { source: "Mankai textile Park", target: "Sadat City", value: 1},
          { source: "China Belt & Road Initiative", target: "Free Economic Zones", value: 1},
          { source: "Free Economic Zones", target: "Shundong Ruyi Factories", value: 1},
          { source: "Free Economic Zones", target: "Mankai textile Park", value: 1},
          { source: "Shundong Ruyi Factories", target: "Suez Canal", value: 1},
          { source: "New Suez Canal", target: "Suez Canal", value: 1},
          { source: "Suez Canal", target: "Port Saied", value: 1},
          { source: "Free Economic Zones", target: "Port Saied", value: 1},
          { source: "Free Economic Zones", target: "Synthetic Fibre Growth", value: 1},
          { source: "Suez Canal Authority (SCA)", target: "Suez Canal", value: 1},
          { source: "China Belt & Road Initiative", target: "Suez Canal Authority (SCA)", value: 1},
          { source: "International Consortiums", target: "China Belt & Road Initiative", value: 1},
          { source: "International Consortiums", target: "Emaar from United Arab Emirates", value: 1},
          { source: "International Consortiums", target: "AMA S.p.A. (ama) from Italy", value: 1},
          { source: "International Consortiums", target: "FCC from Spain", value: 1},
          { source: "International Consortiums", target: "URBASER from Spain", value: 1},
          { source: "International Consortiums", target: "China Belt & Road Initiative", value: 1},
          { source: "URBASER from Spain", target: "Emaar from United Arab Emirates", value: 1},
          { source: "URBASER from Spain", target: "AMA S.p.A. (ama) from Italy", value: 1},
          { source: "URBASER from Spain", target: "FCC from Spain", value: 1},
          { source: "International Consortiums", target: "Suez Canal", value: 1},
          { source: "International Consortiums", target: "Shundong Ruyi Group", value: 1},
          { source: "International Consortiums", target: "Mankai Investments", value: 1},
          { source: "Egypt", target: "Egyptian Company for Garbage Collection (ECGC)", value: 1},
          { source: "Egyptian Company for Garbage Collection (ECGC)", target: "International Consortiums", value: 1},
          { source: "Egypt", target: "Zabbaleen", value: 1},
          { source: "Egypt", target: "Sadat City", value: 1},
          { source: "Egypt", target: "Suez Canal", value: 1},
          { source: "Egypt", target: "Port Saied", value: 1},
          { source: "Egypt", target: "Free Economic Zones", value: 1},
          { source: "Numerous local companies in dry-digging phase", target: "New Suez Canal", value: 1},
          { source: "Zabbaleen", target: "City Solid Waste", value: 5},
          { source: "Egyptian Company for Garbage Collection (ECGC)", target: "City Solid Waste", value: 1},
          { source: "URBASER from Spain", target: "City Solid Waste", value: 1},
          { source: "AMA S.p.A. (ama) from Italy", target: "City Solid Waste", value: 1},
          { source: "Emaar from United Arab Emirates", target: "City Solid Waste", value: 1},
          { source: "City Solid Waste", target: "Domestic and Commercial Waste Water", value: 1},
          { source: "Domestic and Commercial Waste Water", target: "Agricultural Irrigation", value: 1},
          { source: "Agricultural Irrigation", target: "Agricultural Drains", value: 1},
          { source: "Textile Factories", target: "Industrial Contaminants", value: 1},
          { source: "Mankai textile Park", target: "Industrial Contaminants", value: 1},
          { source: "Shundong Ruyi Factories", target: "Industrial Contaminants", value: 1},
          { source: "Industrial Contaminants", target: "Waste Water Plants", value: 1},
          { source: "Industrial Contaminants", target: "Nile River", value: 1},
          { source: "Industrial Contaminants", target: "Waste Water Plants", value: 1},
          { source: "Domestic and Commercial Waste Water", target: "Waste Water Plants", value: 1},
          { source: "Waste Water Plants", target: "Sludge Fertilizer", value: 1},
          { source: "Sludge Fertilizer", target: "Salt & Freshwater Marsh", value: 1},
          { source: "Salt & Freshwater Marsh", target: "Nile Delta", value: 1},
          { source: "Waste Water Plants", target: "Nile River", value: 1},
          { source: "Nile River", target: "Nile Delta", value: 1},
          { source: "Nile Delta", target: "Mediterranean Sea", value: 1},
          { source: "Mediterranean Sea", target: "Suez Canal", value: 1},
          { source: "Nile Delta", target: "Coastal Shores", value: 1},
          { source: "Suez Canal", target: "Red Sea", value: 1},
          { source: "Aquaculture & Fisheries", target: "Nile River", value: 1},
          { source: "MegaFauna", target: "Aquaculture & Fisheries", value: 1},
          { source: "MegaFauna", target: "Nile River", value: 1},
          { source: "MacroFauna", target: "Nile River", value: 1},
          { source: "MacroFauna", target: "MegaFauna", value: 1},
          { source: "MicroFauna", target: "MacroFauna", value: 1},
          { source: "River Sediment", target: "MicroFauna", value: 1},
          { source: "River Sediment", target: "MicroFauna", value: 1},
          { source: "Microfibres", target: "MicroFauna", value: 1},
          { source: "Microfibres", target: "River Sediment", value: 1},
          { source: "Microfibres", target: "Microbial Colonies", value: 1},
          { source: "Microfibres", target: "Microbial Colonies", value: 1},
          { source: "Microbial Colonies", target: "Microbial Colonies", value: 1},
          { source: "Microfibres", target: "Coastal Shores", value: 1},
          { source: "Aquaculture & Fisheries", target: "Domestic & Commercial", value: 1},
          { source: "Domestic & Commercial", target: "Egypt" , value: 1},
          { source: "Aquaculture & Fisheries", target: "Domestic & Commercial", value: 1},
        ]
      
  
  
        
    };
  
    
      const Graph = ForceGraph3D()(document.getElementById("3d-graph"))
        .graphData(data)
        .backgroundColor('rgba(0,0,0,0)')
        .nodeAutoColorBy("group")
        .linkDirectionalParticles(5)
        .linkDirectionalParticleSpeed(d => d.value * 0.01)
        .linkCurvature(0)
        .linkDirectionalParticleWidth(5)
        .linkColor(() => 'rgb(255, 30, 215)')
        .linkDirectionalParticleColor(() => 'rgb(255, 30, 215)')
        .linkWidth(0.1)
        .linkOpacity(0.4)
        .onNodeClick(node => {
          // add specific node info to the panel
          document.getElementById('panel_img').src = node.img;
          document.getElementById('panel_title').innerHTML = node.id;
          document.getElementById('panel_text').innerHTML = node.text;
  
         
      
        })
        .nodeThreeObject(node => {
          // use a sphere as a drag handle
          const obj = new THREE.Mesh(
            new THREE.SphereGeometry(10),
            new THREE.MeshBasicMaterial({
              depthWrite: false,
              transparent: true,
              opacity: 0,
  //Aninmating nodes 
           //   function animate() {
           //   obj.position.x = Math.random(50, 150) * window.innerWidth + window.innerHeight;
           //   }
  
              
            })
          );
        
          // add text sprite as child
          const sprite = new SpriteText(node.id);
          sprite.textfont = "carbon";
          sprite.color = node.color;
          sprite.textheight = 12;
          
          obj.add(sprite);
          return obj;
        });
  
      // Spread nodes a little wider
      Graph.d3Force("charge").strength(-1000);
      
  
    </script>
    <div id="Archive" class="archive">
    <img id="panel_img" src="" class="panel_img">
    <h1 id="panel_title" class="panel_title"></h1>
    <p id="panel_text" class="panel_text"></p>
    </div>
</body>
